### 数据库索引优化
1. MySQL支持的索引
    1. b-tree索引
    2. Hash索引

2. b-tree索引
    1. 特点
        - b-tree索引以b+树为结构存储数据的
        - b-tree索引能够加快数据的查询速度
        - b-tree索引更适合进行范围查找
    2. 使用场景
        - 全值匹配的查询
        - 匹配最左前缀的查询
        - 匹配列前缀查询
        - 匹配范围值查询
        - 精确匹配做前列并范围匹配另外一列
        - 只访问索引的查询
    3. 使用限制
        - 如果不是按照索引最左列开始查找,则无法使用索引
        - 使用索引时不能跳过索引中的列
        - not in 和 <> 操作无法使用索引
        - 如果查询中有某个列的范围查询,则右边的所有列都无法使用索引

3. Hash索引
    1. 特点
        -  Hash索引是基于Hash表实现的,只有查询条件精确匹配Hash索引中的所有列时,才能够使用hash索引
        - 存储引擎会为每一行计算一个Hash码,Hash索引中存储的就是Hash码

    2. Hash索引的限制
        - Hash索引必须进行二次查找
        - Hash索引无法用于排序
        - Hash索引不支持部分索引查找也不支持范围查找
        - Hash索引中Hash码的计算可能存在Hash冲突

4. 使用索引的目的
    1. 索引可以减少存储引擎需要扫描的数据量
    2. 索引可以帮助我们进行排序以避免使用临时表
    3. 索引可以把随机I/O变为顺序I/O

5. 索引太多的成本
    - 索引会增加写操作的成本
    - 太多的索引会增加查询优化器的选择时间

6. 索引的优化策略
    1. 索引列上不能使用表达式或函数
    2. 前缀索引和索引列的选择性
    3. 联合索引
        - 经常会被使用到的列优先
        - 选择性高的列优先
        - 宽度小的列优先
    4. 覆盖索引
        - 包含查询所需全部字段的索引称为覆盖索引
        - 优点
            - 可以优化缓存，减少磁盘IO操作
            - 可以减少随机IO，变随机IO为顺序IO
            - 可以避免Innodb主键索引的二次查询
            - 可以避免MyIsam表进行系统调用
        - 缺点
            - 有些存储引擎不支持覆盖索引
            - 查询中使用了太多的列，不适合使用覆盖索引
            - 使用了双%号的like查询
    5. 删除重复和冗余的索引
        - 工具/命令 pt-duplicate-key-checker h=127.0.0.1
    6. 更新索引统计信息及减少索引碎片
        - analyze table table_name
